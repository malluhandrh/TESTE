<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Menu do Anfitrião • Patas Pousada</title>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<style>
@import url('https://fonts.googleapis.com/css2?family=Nunito:wght@200..1000&family=Parkinsans:wght@300..800&display=swap');

:root{
  --brand:#e2725b;
  --brand-strong:#d45f47;
  --ink:#1f2937;
  --muted:#6b7280;
  --bg:#f3f4f6;
  --white:#fff;
  --radius:12px;
  --shadow:0 4px 12px rgba(0,0,0,.06);
  --line:#e5e7eb;
  --chip:#fff0ec;
  --chip-border:#ffd8cf;
  --transition:.2s cubic-bezier(.25,.8,.25,1);
}

*{box-sizing:border-box;margin:0;padding:0}
body{
  font-family:Nunito,system-ui,Arial,sans-serif;
  background:var(--bg);
  color:var(--ink);
  line-height:1.5;
}
a{text-decoration:none;color:inherit}

/* HEADER */
header{
  display:flex;
  justify-content:center;
  background:rgba(255,255,255,.95);
  box-shadow:0 1px 3px rgba(0,0,0,.05);
  position:sticky;
  top:0;
  z-index:100;
  backdrop-filter:blur(8px);
}
.nav{
  max-width:1100px;
  width:100%;
  padding:16px 24px;
  display:flex;
  align-items:center;
  justify-content:space-between;
}
.logo{
  display:flex;
  align-items:center;
  gap:10px;
  font-family:Parkinsans,sans-serif;
  font-weight:800;
  font-size:1.35rem;
  color:var(--brand);
}
.logo img{width:34px;height:34px}

.nav ul{
  list-style:none;
  display:flex;
  gap:24px;
  align-items:center;
}
.nav a.link{
  font-family:Parkinsans,sans-serif;
  font-weight:600;
  color:#4b5563;
}
.nav a.link:hover{color:var(--brand)}

/* USER MENU */
.user{position:relative}
.user__trigger{
  display:flex;
  align-items:center;
  gap:10px;
  padding:6px 12px 6px 6px;
  border-radius:40px;
  cursor:pointer;
}
.user__trigger:hover{
  background:#fff;
  border:1px solid var(--line);
  box-shadow:var(--shadow);
}
.user__avatar-img{
  width:40px;height:40px;
  border-radius:50%;
  object-fit:cover;
  display:none;
  border:1px solid var(--line);
}
.badge{
  width:40px;height:40px;
  border-radius:50%;
  background:var(--chip);
  color:var(--brand);
  display:grid;
  place-items:center;
  font-weight:800;
}
.user__trigger span{
  max-width:140px;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  font-weight:700;
}
.user__dropdown{
  position:absolute;
  right:0;
  top:calc(100% + 8px);
  background:#fff;
  border-radius:12px;
  border:1px solid var(--line);
  box-shadow:0 10px 25px rgba(0,0,0,.1);
  width:220px;
  padding:6px;
  opacity:0;
  visibility:hidden;
  transform:translateY(10px);
  transition:.2s;
}
.user:hover .user__dropdown{
  opacity:1;
  visibility:visible;
  transform:translateY(0);
}
.user__item{
  display:flex;
  gap:10px;
  align-items:center;
  padding:10px 14px;
  border-radius:8px;
  font-size:.85rem;
  font-weight:600;
  color:#4b5563;
}
.user__item:hover{
  background:#f9fafb;
  color:var(--brand);
}

/* CONTEÚDO */
.wrap{
  max-width:800px;
  margin:40px auto;
  padding:0 24px;
  min-height:60vh;
}
.back-btn{
  display:inline-flex;
  gap:8px;
  align-items:center;
  margin-bottom:24px;
  padding:8px 16px;
  border-radius:30px;
  border:1px solid var(--line);
  background:#fff;
  color:var(--muted);
  font-weight:700;
  cursor:pointer;
}
.back-btn:hover{
  border-color:var(--brand);
  color:var(--brand);
  transform:translateX(-2px);
}

.title{
  font:800 1.8rem Parkinsans,sans-serif;
  text-align:center;
}
.lead{
  text-align:center;
  color:var(--muted);
  margin:12px auto 40px;
  max-width:500px;
}

.grid{
  display:grid;
  gap:16px;
}
@media(min-width:600px){
  .grid{grid-template-columns:1fr 1fr}
}

.card{
  background:#fff;
  border-radius:16px;
  padding:24px;
  box-shadow:var(--shadow);
  display:flex;
  flex-direction:column;
  align-items:center;
  text-align:center;
  transition:.2s;
}
.card:hover{
  transform:translateY(-4px);
  box-shadow:0 12px 24px rgba(0,0,0,.08);
}
.icon-box{
  width:56px;height:56px;
  border-radius:50%;
  background:var(--chip);
  color:var(--brand);
  display:grid;
  place-items:center;
  font-size:1.4rem;
}
.card h3{
  font:700 1.1rem Parkinsans,sans-serif;
  margin-top:12px;
}
.card p{
  font-size:.85rem;
  color:var(--muted);
}
</style>
</head>

<body>

<header>
  <nav class="nav">
    <a class="logo" href="home_host.html">
      <img src="https://images.vexels.com/media/users/3/202255/isolated/preview/a095b3fe28f3c9febbf176089e2d7e08-pegada-de-cachorro-com-osso-de-coracao-rosa-plana.png">
      Patas Pousada
    </a>

    <ul>
      <li><a class="link" href="reservas_host.html">Reservas</a></li>
      <li><a class="link" href="ajuda.html">Ajuda</a></li>
    </ul>

    <div class="user">
      <div class="user__trigger">
        <img id="userAvatar" class="user__avatar-img">
        <div class="badge" id="userInitial">H</div>
        <span id="userName">Anfitrião</span>
      </div>
      <div class="user__dropdown">
        <a class="user__item" href="perfil_host.html"><i class="fa-solid fa-user-pen"></i> Editar perfil</a>
        <a class="user__item" href="#" id="btnLogout"><i class="fa-solid fa-arrow-right-from-bracket"></i> Sair</a>
      </div>
    </div>
  </nav>
</header>

<main class="wrap">

<button class="back-btn" onclick="location.href='home_host.html'">
  <i class="fa-solid fa-arrow-left"></i> Voltar para o painel
</button>

<h1 class="title">Gerenciar Perfil</h1>
<p class="lead">Gerencie seus dados de anfitrião e a segurança da sua conta.</p>

<div class="grid">
  <a class="card" href="editar_perfil_host.html">
    <div class="icon-box"><i class="fa-solid fa-user-gear"></i></div>
    <h3>Dados do anfitrião</h3>
    <p>Informações públicas, endereço e descrição.</p>
  </a>

  <a class="card" href="alterar_senha_host.html">
    <div class="icon-box"><i class="fa-solid fa-shield-halved"></i></div>
    <h3>Segurança</h3>
    <p>Altere sua senha e dados de acesso.</p>
  </a>
</div>

</main>

<script>
const sb = supabase.createClient(
  "https://nwbgzokttjgkipwzfgzc.supabase.co",
  "sb_publishable_wn2dxmpI7gFOx4nLh5oHqg_Qlc4Q0lQ"
);

const userName = document.getElementById('userName');
const userInitial = document.getElementById('userInitial');
const userAvatar = document.getElementById('userAvatar');
const btnLogout = document.getElementById('btnLogout');

function initials(name){
  if(!name) return 'H';
  return name.split(' ').map(n=>n[0]).join('').slice(0,2).toUpperCase();
}

async function init(){
  const { data:{ user } } = await sb.auth.getUser();
  if(!user) return location.href="cadastrarouentrar.html";

  const { data } = await sb
    .from('hosts')
    .select('full_name, avatar_url')
    .eq('id', user.id)
    .maybeSingle();

  const name = data?.full_name || 'Anfitrião';
  userName.textContent = name;

  if(data?.avatar_url){
    userAvatar.src = data.avatar_url + '?t=' + Date.now();
    userAvatar.style.display='block';
    userInitial.style.display='none';
  }else{
    userInitial.textContent = initials(name);
  }
}

btnLogout.onclick = async ()=>{
  await sb.auth.signOut();
  location.href="index.html";
};

init();
</script>

</body>
</html>
